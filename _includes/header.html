<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet" />
<link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />

<style>       
    #hBar{
        height: 3px;
        background-color: #E6E6E6;
        border: none;
    }
</style>

<script>
        function redirectToLogin() {
            const originalUrl = window.location.href;
            const encodedUrl = encodeURIComponent(originalUrl);
            window.location.href = `http://10.157.136.215:8082/login?redirect_uri=${encodedUrl}`;
        }
    
        async function fetchProtectedContent(filePath) {
            const token = localStorage.getItem('authToken');
            if (!token) {
                redirectToLogin()
                return;
            }

            const response = await fetch(`https://api.github.com/repos/CasperBresdahlRegionH/Dokumentation_intern/contents/blob/main/${filePath}`, {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });

            if (response.ok) {
                const content = await response.json();
                const fileContent = atob(content.content); // Decode base64 content
                document.getElementById('protected-content').innerText = fileContent;
            } else {
                document.getElementById('protected-content').innerText = 'You do not have access to this content.';
            }
        }

        document.addEventListener('DOMContentLoaded', (event) => {
            // Example usage: fetch a specific file's content
            const filePath = 'PythonLeverancer.xlsx'; // Update this path as needed
            fetchProtectedContent(filePath);
        });
    </script>

<body class="line-numbers">
<body class="copy-to-clipboard">
